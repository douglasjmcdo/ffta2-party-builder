<div class="editpagewrapper">
    <p>edit-page works! this is edit page for unit {{routed_id }}</p>
    <a routerLink="/main">Take me back to main!</a>

    <h2>RACES</h2>
    <div class="sprite-list-wrapper">
        <div class="sprite-wrapper" *ngFor="let entry of this.racefilter">
            <button 
                class="r-entry sprite"  
                [ngClass]="{'selected-sprite' : this.unit_data.race === entry }"
                (click)="this.ps.updatePartyMember(+routed_id, 'race', entry.toString())"
            >
            <!-- note: this assumes defaultsprites is in the same order as racefilter & race-exclusive -->
                <img class="btn-img" alt="{{defaultsprites[entry + 1]}}"
                src='../../assets/class_sprites/FFTA2-{{defaultsprites[entry + 1]}}Sprite.webp'
                >
            </button>
        </div>
    </div>

    <h2>PRIMARY CLASSES</h2>
    <div class="sprite-list-wrapper">
        <div class="sprite-wrapper" *ngFor="let entry of this.priclassfilter">
            <!-- todo: filter based on selected abilities -->
            <button class="c-entry sprite" 
            [ngClass]="{'selected-sprite' : this.unit_data.primaryclass === entry['classname'] }"
            (click)="this.ps.updatePartyMember(+routed_id, 'priclass', entry['classname'])"
            >
                <img *ngIf="entry['viableraces'].length >= 2 && entry['classname'] != ''" 
                class="btn-img" alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-{{this.unit_data.changetracker | selectSpriteGivenViableRace:this.unit_data:entry['viableraces']:this.ps.RACENAMES:this.racefilter}}{{entry['classname']}}Sprite.webp">
                <img *ngIf="entry['viableraces'].length < 2"
                class="btn-img" alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-{{entry['classname']}}Sprite.webp">
                <img *ngIf="entry['classname'] == ''"
                class="btn-img"  alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-NullSprite.webp">
            </button>
        </div>
    </div>

    <h2>SECONDARY CLASSES</h2>
    <div class="sprite-list-wrapper">
        <div class="sprite-wrapper" *ngFor="let entry of this.secclassfilter">
            <!-- todo: filter based on selected abilities -->
            <button class="c-entry sprite"
            [ngClass]="{'selected-sprite' : this.unit_data.secondaryclass === entry['classname'] }" 
            (click)="this.ps.updatePartyMember(+routed_id, 'secclass', entry['classname'])"
            >
                <img *ngIf="entry['viableraces'].length >= 2 && entry['classname'] != ''" 
                class="btn-img" alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-{{this.unit_data.changetracker | selectSpriteGivenViableRace:this.unit_data:entry['viableraces']:this.ps.RACENAMES:this.racefilter}}{{entry['classname']}}Sprite.webp">
                <img *ngIf="entry['viableraces'].length < 2"
                class="btn-img" alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-{{entry['classname']}}Sprite.webp">
                <img *ngIf="entry['classname'] == ''"
                class="btn-img" alt="{{entry['classname']}}"
                src="../../assets/class_sprites/FFTA2-NullSprite.webp">
            </button>
        </div>    
    </div>

    <h2>R-ABILITIES</h2>
    <div class="a-entry" *ngFor="let entry of this.ps.MOCKRABILITY">{{ entry }}</div>
    
    <h2>P-ABILITIES</h2>
    <div class="a-entry" *ngFor="let entry of this.ps.MOCKPABILITY">{{ entry }}</div>



</div>